<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sevimli Canavarlarƒ± Yakala - V2</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React ve ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Fredoka', sans-serif; }
        .text-shadow { text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #c7c7c7; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #a0a0a0; }
        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); opacity: 1; }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        .animate-bounce-in { animation: bounce-in 0.6s cubic-bezier(0.215, 0.610, 0.355, 1.000) both; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ƒ∞KONLAR ---
        const Icons = {
            Play: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
            Trophy: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
            UserPlus: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></svg>,
            Star: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
            RefreshCcw: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>,
            Save: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
            ImageIcon: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>,
            AlertTriangle: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
            Settings: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            Filter: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
        };

        // --- Konfeti Bile≈üeni ---
        const Confetti = () => {
            const canvasRef = useRef(null);
            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                const particles = [];
                const colors = ['#FFC700', '#FF0000', '#2E3192', '#41BBC7', '#73CD4B', '#FF7E00'];
                for (let i = 0; i < 300; i++) {
                    particles.push({
                        x: canvas.width / 2, y: canvas.height / 2,
                        w: Math.random() * 10 + 5, h: Math.random() * 10 + 5,
                        vx: (Math.random() - 0.5) * 20, vy: (Math.random() - 0.5) * 20 - 10,
                        color: colors[Math.floor(Math.random() * colors.length)],
                        gravity: 0.5, drag: 0.96
                    });
                }
                let animationId;
                const render = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    particles.forEach((p) => {
                        p.x += p.vx; p.y += p.vy;
                        p.vy += p.gravity; p.vx *= p.drag; p.vy *= p.drag;
                        ctx.fillStyle = p.color; ctx.fillRect(p.x, p.y, p.w, p.h);
                    });
                    animationId = requestAnimationFrame(render);
                };
                render();
                return () => cancelAnimationFrame(animationId);
            }, []);
            return <canvas ref={canvasRef} className="fixed inset-0 pointer-events-none z-50" />;
        };

        // --- Ana Oyun Bile≈üeni ---
        function MonsterCatcher() {
            const [gameState, setGameState] = useState('menu');
            const [score, setScore] = useState(0);
            const [timeLeft, setTimeLeft] = useState(30);
            const [activeItem, setActiveItem] = useState({ holeIndex: null, content: 'üëæ', type: 'standard' });
            
            // Yeni State'ler: Zorluk ve Sƒ±nƒ±f
            const [difficulty, setDifficulty] = useState('medium'); // easy, medium, hard
            const [currentClass, setCurrentClass] = useState('5-A'); 
            const [viewClassFilter, setViewClassFilter] = useState('all'); // Leaderboard filtresi

            // Resimler
            const [bonusImage, setBonusImage] = useState(null);
            const [trapImage, setTrapImage] = useState(null);

            const [players, setPlayers] = useState([]); 
            const [currentPlayerName, setCurrentPlayerName] = useState('');
            
            const timerRef = useRef(null);
            const moleTimerRef = useRef(null);

            const monsters = ['üëæ', 'üëπ', 'üëª', 'üëΩ', 'ü§ñ', 'ü§°', 'üë∫', 'üê≤'];

            const handleImageUpload = (e, type) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        if (type === 'bonus') setBonusImage(event.target.result);
                        if (type === 'trap') setTrapImage(event.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const startGame = () => {
                setScore(0);
                setTimeLeft(30);
                setGameState('playing');
                setCurrentPlayerName('');
                setActiveItem({ holeIndex: null, content: '', type: '' });
                
                timerRef.current = setInterval(() => {
                    setTimeLeft((prev) => {
                        if (prev <= 1) {
                            endGame();
                            return 0;
                        }
                        return prev - 1;
                    });
                }, 1000);

                spawnItem();
            };

            const getSpeedRange = () => {
                switch(difficulty) {
                    case 'easy': return { min: 1000, max: 1500 }; // Yava≈ü
                    case 'hard': return { min: 400, max: 700 };   // Hƒ±zlƒ±
                    default: return { min: 600, max: 1000 };      // Orta (medium)
                }
            };

            const spawnItem = () => {
                const ranges = getSpeedRange();
                const randomTime = Math.floor(Math.random() * (ranges.max - ranges.min)) + ranges.min;
                const randomHole = Math.floor(Math.random() * 9);
                
                let itemType = 'standard';
                let itemContent = monsters[Math.floor(Math.random() * monsters.length)];

                const chance = Math.random();
                
                if (bonusImage && chance > 0.75) { 
                    itemType = 'bonus';
                    itemContent = bonusImage;
                } else if (trapImage && chance > 0.50 && chance <= 0.75) { 
                    itemType = 'trap';
                    itemContent = trapImage;
                }

                setActiveItem({ holeIndex: randomHole, content: itemContent, type: itemType });

                moleTimerRef.current = setTimeout(() => {
                    if (gameState === 'playing' || gameState === 'menu') {
                        spawnItem(); 
                    }
                }, randomTime);
            };

            useEffect(() => {
                if (gameState !== 'playing') {
                    clearInterval(timerRef.current);
                    clearTimeout(moleTimerRef.current);
                }
            }, [gameState]);

            const endGame = () => {
                clearInterval(timerRef.current);
                clearTimeout(moleTimerRef.current);
                setGameState('inputName');
                setActiveItem({ holeIndex: null, content: '', type: '' });
            };

            const handleWhack = (index) => {
                if (index === activeItem.holeIndex && gameState === 'playing') {
                    let points = 10;
                    if (activeItem.type === 'bonus') points = 100;
                    else if (activeItem.type === 'trap') points = -1;

                    setScore((prev) => prev + points);
                    setActiveItem({ holeIndex: null, content: '', type: '' }); 
                    
                    clearTimeout(moleTimerRef.current);
                    spawnItem(); 
                }
            };

            const savePlayer = (e) => {
                e.preventDefault();
                if (!currentPlayerName.trim()) return;
                
                // Oyuncuyu sƒ±nƒ±f bilgisiyle kaydet
                const newPlayers = [...players, { 
                    name: currentPlayerName, 
                    score: score,
                    class: currentClass 
                }];
                newPlayers.sort((a, b) => b.score - a.score);
                setPlayers(newPlayers);
                setGameState('leaderboard');
            };

            const resetAll = () => {
                setPlayers([]);
                setGameState('menu');
            };

            // Benzersiz sƒ±nƒ±flarƒ± filtrelemek i√ßin
            const uniqueClasses = [...new Set(players.map(p => p.class))];

            // Filtrelenmi≈ü oyuncu listesi
            const filteredPlayers = viewClassFilter === 'all' 
                ? players 
                : players.filter(p => p.class === viewClassFilter);

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex flex-col items-center justify-center font-sans p-4 text-white">
                    
                    {gameState === 'menu' && (
                        <div className="bg-white/90 backdrop-blur-sm p-6 rounded-3xl shadow-2xl text-center max-w-md w-full animate-bounce-in text-gray-800 border-4 border-yellow-400">
                            <div className="text-5xl mb-2 animate-bounce">üëæ</div>
                            <h1 className="text-2xl font-black mb-1 text-purple-600">Sevimli Canavarlarƒ± Yakala!</h1>
                            
                            {/* --- AYARLAR PANELI --- */}
                            <div className="bg-blue-50 p-4 rounded-xl mb-4 border border-blue-200">
                                <div className="flex items-center gap-2 mb-2 font-bold text-blue-700">
                                    <Icons.Settings /> <span className="text-sm">Oyun Ayarlarƒ±</span>
                                </div>
                                
                                {/* Sƒ±nƒ±f Se√ßimi */}
                                <div className="mb-3 text-left">
                                    <label className="text-xs font-bold text-gray-500 uppercase">Sƒ±nƒ±f Adƒ±</label>
                                    <input 
                                        type="text" 
                                        value={currentClass} 
                                        onChange={(e) => setCurrentClass(e.target.value)}
                                        className="w-full p-2 border border-gray-300 rounded-lg text-sm font-bold text-gray-700 focus:border-blue-500 focus:outline-none"
                                        placeholder="√ñrn: 5-A"
                                    />
                                </div>

                                {/* Zorluk Se√ßimi */}
                                <div className="text-left">
                                    <label className="text-xs font-bold text-gray-500 uppercase block mb-1">Hƒ±z Seviyesi</label>
                                    <div className="flex gap-1">
                                        <button onClick={() => setDifficulty('easy')} className={`flex-1 py-1 text-sm rounded-lg border-2 font-bold transition ${difficulty === 'easy' ? 'bg-green-500 text-white border-green-600' : 'bg-white text-gray-500 border-gray-200'}`}>Kolay</button>
                                        <button onClick={() => setDifficulty('medium')} className={`flex-1 py-1 text-sm rounded-lg border-2 font-bold transition ${difficulty === 'medium' ? 'bg-yellow-400 text-white border-yellow-500' : 'bg-white text-gray-500 border-gray-200'}`}>Orta</button>
                                        <button onClick={() => setDifficulty('hard')} className={`flex-1 py-1 text-sm rounded-lg border-2 font-bold transition ${difficulty === 'hard' ? 'bg-red-500 text-white border-red-600' : 'bg-white text-gray-500 border-gray-200'}`}>Zor</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex gap-2 mb-4">
                                <label className={`flex-1 flex flex-col items-center justify-center p-2 border-2 border-dashed border-green-400 rounded-xl cursor-pointer hover:bg-green-50 transition ${!bonusImage ? 'animate-pulse' : ''}`}>
                                    <input type="file" accept="image/*" className="hidden" onChange={(e) => handleImageUpload(e, 'bonus')} />
                                    {bonusImage ? (
                                        <img src={bonusImage} className="w-8 h-8 object-cover rounded-full" />
                                    ) : (
                                        <Icons.ImageIcon />
                                    )}
                                    <span className="text-[10px] font-bold mt-1 text-green-600">+100 Puan</span>
                                </label>
                                <label className={`flex-1 flex flex-col items-center justify-center p-2 border-2 border-dashed border-red-400 rounded-xl cursor-pointer hover:bg-red-50 transition ${!trapImage ? 'animate-pulse' : ''}`}>
                                    <input type="file" accept="image/*" className="hidden" onChange={(e) => handleImageUpload(e, 'trap')} />
                                    {trapImage ? (
                                        <img src={trapImage} className="w-8 h-8 object-cover rounded-full" />
                                    ) : (
                                        <Icons.AlertTriangle />
                                    )}
                                    <span className="text-[10px] font-bold mt-1 text-red-600">-1 Puan</span>
                                </label>
                            </div>

                            <button onClick={startGame} className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-xl shadow-lg transform transition hover:scale-105 flex items-center justify-center gap-2 text-lg">
                                <Icons.Play /> Oyuna Ba≈üla
                            </button>

                            {players.length > 0 && (
                                <button onClick={() => setGameState('leaderboard')} className="mt-3 w-full bg-blue-400 hover:bg-blue-500 text-white font-bold py-2 px-8 rounded-xl flex items-center justify-center gap-2 text-sm">
                                    <Icons.Trophy /> Puan Tablosu
                                </button>
                            )}
                        </div>
                    )}

                    {gameState === 'playing' && (
                        <div className="w-full max-w-lg">
                            {/* √úst Bilgi √áubuƒüu */}
                            <div className="flex justify-between items-center mb-4 bg-white/20 p-3 rounded-2xl backdrop-blur-md border border-white/30">
                                <div className="text-center">
                                    <p className="text-xs uppercase tracking-wide opacity-80 font-bold">S√ºre</p>
                                    <p className={`text-2xl font-black ${timeLeft < 10 ? 'text-red-300 animate-pulse' : 'text-white'}`}>{timeLeft}</p>
                                </div>
                                <div className="bg-black/20 px-4 py-1 rounded-lg">
                                    <span className="text-xs text-yellow-300 font-bold uppercase block text-center tracking-widest">{currentClass}</span>
                                    <span className="text-white text-xs text-center block opacity-75">{difficulty === 'easy' ? 'Kolay' : difficulty === 'hard' ? 'Zor' : 'Orta'}</span>
                                </div>
                                <div className="text-center">
                                    <p className="text-xs uppercase tracking-wide opacity-80 font-bold">Puan</p>
                                    <p className="text-3xl font-black text-yellow-300 drop-shadow-md">{score}</p>
                                </div>
                            </div>

                            <div className="bg-white/80 p-6 rounded-3xl shadow-2xl grid grid-cols-3 gap-4 border-8 border-indigo-300 relative">
                                {Array.from({ length: 9 }).map((_, i) => (
                                    <div key={i} className="aspect-square bg-gray-800 rounded-full relative overflow-hidden shadow-inner cursor-pointer group select-none" onClick={() => handleWhack(i)}>
                                        <div className="absolute bottom-0 w-full h-1/3 bg-gray-700 rounded-b-full opacity-50"></div>
                                        <div className={`absolute inset-0 flex items-center justify-center transition-transform duration-100 ease-out ${activeItem.holeIndex === i ? 'scale-100 translate-y-0' : 'scale-0 translate-y-20'}`}>
                                            {activeItem.holeIndex === i && (
                                                activeItem.type === 'standard' ? (
                                                    <span className="text-6xl">{activeItem.content}</span>
                                                ) : (
                                                    <img src={activeItem.content} className={`w-full h-full object-cover rounded-full p-2 border-4 ${activeItem.type === 'bonus' ? 'border-yellow-400' : 'border-red-500'}`} />
                                                )
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {gameState === 'inputName' && (
                        <div className="bg-white p-8 rounded-3xl shadow-2xl text-center max-w-md w-full animate-bounce-in text-gray-800 border-4 border-purple-400">
                            <div className="text-5xl mb-2">‚è∞</div>
                            <h2 className="text-2xl font-bold text-gray-700">S√ºre Doldu!</h2>
                            <div className="bg-purple-50 rounded-xl p-4 my-4 border border-purple-100">
                                <p className="text-gray-500 uppercase text-xs font-bold">Kazanƒ±lan Puan</p>
                                <p className="text-5xl font-black text-purple-600">{score}</p>
                                <div className="mt-2 inline-block bg-purple-200 text-purple-800 text-xs px-2 py-1 rounded font-bold">{currentClass}</div>
                            </div>
                            <form onSubmit={savePlayer} className="flex flex-col gap-3">
                                <input type="text" autoFocus value={currentPlayerName} onChange={(e) => setCurrentPlayerName(e.target.value)} placeholder="Adƒ±nƒ± buraya yaz..." className="w-full p-4 border-2 border-gray-300 rounded-xl text-xl focus:border-purple-500 focus:outline-none bg-gray-50" maxLength={20} />
                                <button type="submit" disabled={!currentPlayerName.trim()} className="mt-2 w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white font-bold py-3 px-8 rounded-xl shadow-lg flex items-center justify-center gap-2">
                                    <Icons.Save /> Kaydet
                                </button>
                            </form>
                        </div>
                    )}

                    {gameState === 'leaderboard' && (
                        <div className="bg-white p-6 rounded-3xl shadow-2xl w-full max-w-2xl h-[80vh] flex flex-col text-gray-800 border-4 border-blue-400">
                            <div className="flex items-center justify-between mb-4 border-b pb-4">
                                <div>
                                    <h2 className="text-2xl font-black text-blue-600 flex items-center gap-2">
                                        <Icons.Trophy className="text-yellow-500" /> Skor Tablosu
                                    </h2>
                                </div>
                                {/* Sƒ±nƒ±f Filtresi */}
                                <div className="flex items-center gap-2">
                                    <Icons.Filter className="text-gray-400" />
                                    <select 
                                        value={viewClassFilter} 
                                        onChange={(e) => setViewClassFilter(e.target.value)}
                                        className="bg-gray-100 border border-gray-300 text-gray-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2 font-bold"
                                    >
                                        <option value="all">T√ºm Sƒ±nƒ±flar</option>
                                        {uniqueClasses.map((cls, idx) => (
                                            <option key={idx} value={cls}>{cls}</option>
                                        ))}
                                    </select>
                                </div>
                            </div>
                            
                            <div className="flex-1 overflow-y-auto pr-2 custom-scrollbar">
                                {filteredPlayers.length === 0 ? (
                                    <div className="text-center text-gray-400 mt-10">Bu sƒ±nƒ±fta hen√ºz kayƒ±t yok.</div>
                                ) : (
                                    filteredPlayers.map((player, index) => (
                                        <div key={index} className={`flex items-center justify-between p-3 mb-2 rounded-xl border-2 ${index === 0 && viewClassFilter !== 'all' ? 'bg-yellow-50 border-yellow-400' : 'bg-gray-50 border-gray-100'}`}>
                                            <div className="flex items-center gap-3">
                                                <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shadow-sm ${index === 0 ? 'bg-yellow-400 text-yellow-900' : 'bg-gray-300 text-gray-700'}`}>
                                                    {index + 1}
                                                </div>
                                                <div>
                                                    <div className="font-bold text-lg text-gray-700 leading-tight">{player.name}</div>
                                                    <span className="text-xs font-bold text-white bg-indigo-400 px-2 py-0.5 rounded-md">{player.class}</span>
                                                </div>
                                            </div>
                                            <span className="font-black text-xl text-indigo-600">{player.score}</span>
                                        </div>
                                    ))
                                )}
                            </div>
                            <div className="mt-4 grid grid-cols-2 gap-3">
                                <button onClick={startGame} className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition">
                                    <Icons.UserPlus /> Sƒ±radaki √ñƒürenci
                                </button>
                                <button onClick={() => setGameState('winner')} className="bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-3 rounded-xl shadow-lg flex items-center justify-center gap-2 transition transform hover:scale-105">
                                    <Icons.Star /> ≈ûampiyonu Se√ß!
                                </button>
                            </div>
                            <div className="mt-2 text-center">
                                <button onClick={() => setGameState('menu')} className="text-xs text-gray-400 underline hover:text-gray-600">Ayarlara D√∂n</button>
                            </div>
                        </div>
                    )}

                    {gameState === 'winner' && (
                        <>
                            <Confetti />
                            <div className="relative z-10 text-center animate-bounce-in p-8">
                                <div className="text-8xl mb-4 animate-bounce">üëë</div>
                                <h2 className="text-4xl font-bold text-white mb-2 text-shadow">TEBRƒ∞KLER!</h2>
                                
                                {/* Kazananƒ± Filtreye G√∂re Belirle */}
                                {(() => {
                                    const winner = filteredPlayers[0];
                                    if (!winner) return <p className="text-white">Bu kategoride kazanan yok.</p>;
                                    return (
                                        <>
                                            <div className="mb-4">
                                                <span className="bg-white/30 text-white px-4 py-1 rounded-full font-bold text-sm uppercase tracking-widest border border-white/50">
                                                    {viewClassFilter === 'all' ? 'Genel ≈ûampiyon' : `${viewClassFilter} ≈ûampiyonu`}
                                                </span>
                                            </div>
                                            <h1 className="text-5xl md:text-7xl font-black text-yellow-300 drop-shadow-[0_5px_5px_rgba(0,0,0,0.5)] mb-6">{winner.name}</h1>
                                            <div className="bg-white/20 backdrop-blur-md rounded-2xl p-6 inline-block border border-white/40">
                                                <p className="text-xl text-white font-bold uppercase tracking-widest">Toplam Puan</p>
                                                <p className="text-7xl font-black text-white">{winner.score}</p>
                                            </div>
                                        </>
                                    );
                                })()}
                                
                                <div className="mt-12 flex justify-center gap-4">
                                    <button onClick={() => setGameState('leaderboard')} className="bg-white text-purple-600 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-100 transition">Listeye D√∂n</button>
                                    <button onClick={resetAll} className="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition flex items-center gap-2">
                                        <Icons.RefreshCcw /> Sƒ±fƒ±rla
                                    </button>
                                </div>
                            </div>
                        </>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MonsterCatcher />);
    </script>
</body>
</html>


